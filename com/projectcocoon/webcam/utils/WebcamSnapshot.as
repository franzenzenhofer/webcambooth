package com.projectcocoon.webcam.utils {		import flash.display.*;	import flash.media.*;	import flash.system.*;	import flash.geom.*;	import flash.events.*;	import flash.utils.Timer;	import flash.external.ExternalInterface;	public class WebcamSnapshot extends Sprite {		private var _cam:Camera;		private var _video:Video;		private var container:MovieClip = new MovieClip();				public static var mirrorMatrix:Matrix;				public static const VIDEO_WIDTH:int = 320;		public static const VIDEO_HEIGHT:int = 240;				public function WebcamSnapshot(){			init();		}				private function init():void{			addCamera();		}				private function addCamera():void {			_cam = new Camera();			var index:int = Camera.names.indexOf("USB Video Class Video");			_cam = index >= 0 ? Camera.getCamera(index.toString()) : Camera.getCamera();						if(_cam == null) {				ExternalInterface.call("noWebcamError","A webcam error occurred");			}						if(_cam.muted){				Security.showSettings(SecurityPanel.PRIVACY);			}						_cam.setMode(350, 260, 30, false);						var container:MovieClip = new MovieClip();			addChild(container);						_video = new Video();			container.addChild(_video);						_video.attachCamera(_cam);			_video.width = VIDEO_WIDTH;			_video.height = VIDEO_HEIGHT;						var ratio:Number = _video.width/_video.height;			mirrorMatrix = new Matrix();			mirrorMatrix.scale(-Math.max(container.width, ratio*container.height)/VIDEO_WIDTH, Math.max(container.height, (1/ratio)*container.width)/VIDEO_HEIGHT);			mirrorMatrix.translate(Math.max(container.width, ratio*container.height)-(Math.max(container.width, ratio*container.height)-container.width)/2, -(Math.max(container.height, (1/ratio)*container.width)-container.height)/2);			_video.transform.matrix = mirrorMatrix;		}				public function resetCam():void{					_video.attachCamera(_cam);		}				public function set vidHeight(value:Number):void{			//_video.height=value;		}		public function get camWidth():Number{			return _cam.width;		}				public function get camHeight():Number{			return _cam.height;		}		public function set vidWidth(value:Number):void{			//_video.width=value;		}						public function get videoShot():Video{			return _video;		}	}		}